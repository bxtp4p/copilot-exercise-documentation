# Documentation Prompts

Below are the list of prompts used to generate the final state. The prompts are designed to guide the user through the process of documenting the codebase. The user can choose to follow the prompts in order, or skip around as needed. The prompts are designed to be flexible and can be adapted to the specific needs of the user.

## Task: High-level Overview

The first step in documenting a codebase is to provide a high-level overview of the application. This should include a description of the purpose of the application, as well as an explanation of how it works. This information will help developers understand what the application does and why it was designed the way it was.

**Prompt:**

```txt
In Markdown format, describe the purpose of the application and how it works.
```

<details>
   <summary><b>Copilot Response:</b></summary>


````markdown
# Task App Overview

## Purpose

The Task App is designed to manage tasks efficiently, providing users with a platform to create, update, delete, and view tasks. It leverages the MVC architectural pattern to separate concerns, making the application easier to manage and scale.

## How It Works

### Model

The application's model layer handles the data logic. It defines the structure of the tasks, including attributes such as task name, description, due date, and status. The model is responsible for interacting with the database to perform CRUD (Create, Read, Update, Delete) operations on tasks.

### View

The view layer is responsible for presenting data to the user in a user-friendly manner. It consists of templates that render the tasks in various forms, such as lists or detailed views. The view layer ensures that the user interface is intuitive and responsive.

### Controller

The controller acts as an intermediary between the model and view layers. It processes user inputs, interacts with the model to retrieve or update data, and then selects the appropriate view to present to the user. The `TaskController` class is a key component, managing the flow of data and ensuring that the application responds correctly to user actions.

### API Module

The application also includes an API module, allowing for interaction with the task data through HTTP requests. This enables integration with other systems or applications, providing flexibility and extending the app's functionality.

## Running the Application

To see the Task App in action, navigate to the application's directory and run:

```sh
python3 app.py
```

This command starts the application, making it accessible through a web interface where users can manage their tasks.

## Conclusion

The Task App is a comprehensive solution for task management, built using the MVC architectural pattern. Its separation of concerns facilitates maintenance and further development, while the inclusion of an API module offers extended capabilities for users and developers alike.
````

</details>

## Task: Main Components

The next step in documenting a codebase is to describe the main components of the application. This should include a description of the model, view, and controller, as well as an explanation of how they interact with each other. This information will help developers understand how the application is structured and how the different parts of the application work together.

**Prompt:**

```txt
@workspace In Markdown format, describe the main components of the application and how they interact with each other. Include a description for the files #file:services.py , #file:controllers.py , #file:models.py and #file:resources.py.
```

<details>
   <summary><b>Copilot Response:</b></summary>

> ***Note:** URLs had to be cleaned up manually. The markdown generated by Copilot for file links were not valid.*

````markdown

# Application Components Overview

The application is structured following the MVC (Model-View-Controller) architectural pattern, complemented by a RESTful API module. This structure promotes separation of concerns, making the application more manageable and scalable. Below is an overview of the main components and how they interact with each other, focusing on the files [`services.py`](./src/services.py), [`controllers.py`](./src/controllers.py), [`models.py`](./src/models.py), and [`api/resources.py`](./src/api/resources.py).

## Model Layer

### [`models.py`](./src/models.py)

The model layer is responsible for the data logic. It defines the structure of the tasks, including attributes such as task name, description, due date, and status. The [`Task`](./src/models.py) class in [`models.py`](./src/models.py) represents the task entity with properties for [`id`](./src/models.py), [`title`](./src/models.py), [`description`](./src/models.py), and [`done`](./src/services.py) status. This class interacts with the database through SQLAlchemy ORM, facilitating CRUD operations.

## Service Layer

### [`services.py`](./src/services.py)

The service layer, implemented in [`services.py`](./src/services.py), contains the [`TaskService`](./src/services.py) class that abstracts the logic for interacting with the database. It provides methods for retrieving all tasks, fetching a task by ID, adding a new task, updating an existing task, and deleting a task. This layer acts as a bridge between the model and the controllers, encapsulating the business logic of the application.

## Controller Layer

### [`controllers.py`](controllers.py-context")

The controller layer handles the incoming HTTP requests, processes them with the help of the service layer, and returns the appropriate responses. The [`controllers.py`](./src/controllers.py) file defines various functions like [`get_tasks`](./src/controllers.py), [`add_task`](./src/services.py), [`edit_task`](./src/controllers.py), and [`delete_task`](./src/services.py) that render templates or redirect to different routes based on user actions. These functions utilize the [`TaskService`](./src/services.py) methods to interact with the database and manipulate task data.

## API Module

### [`resources.py`](./src/api/resources.py)

In addition to the MVC components, the application includes a RESTful API module for interacting with task data through HTTP requests. The [`resources.py`](./src/api/resources.py) file defines [`TaskList`](./src/api/resources.py) and [`TaskResource`](./src/api/resources.py) classes, extending the `Resource` class from Flask-RESTful. These classes provide endpoints for listing all tasks, retrieving a single task by ID, and placeholders for creating, updating, and deleting tasks. The API module allows for integration with other systems or applications, extending the app's functionality.

## Interaction Flow

1. **User Requests**: Incoming HTTP requests are routed to the appropriate controller functions in [`controllers.py`](./src/controllers.py) or API endpoints in [`resources.py`](./src/api/resources.py).
2. **Controller/API Processing**: These functions/endpoints process the request, calling the relevant methods in the [`TaskService`](./src/services.py) class from [`services.py`](./src/services.py) to perform operations on the data.
3. **Service Layer**: [`TaskService`](./src/services.py) interacts with the [`Task`](./README.md") model in [`models.py`](./src/models.py) to execute database operations through SQLAlchemy.
4. **Response Generation**: The controller functions render templates or redirect to other routes with the processed data, while the API endpoints return JSON responses.

This architecture ensures a clear separation of concerns, with each layer focusing on its specific role, thereby enhancing the maintainability and scalability of the application.
````

</details>

## Task: View Components

To generate documentation for the view components, you can use the following prompt:

**Prompt:**

```txt
In Markdown format, describe the view components of the application. Include descriptions for the files #file:base.html #file:add_task.html #file:edit_task.html #file:task_list.html
```

<details>
   <summary><b>Copilot Response:</b></summary>

````markdown

# View Components of the Application

## Base Template: [`base.html`](./src/templates/base.html)

The [`base.html`](.src/templates/base.html) file serves as the foundation for all other templates in the application. It defines the basic HTML structure, including the `DOCTYPE`, `html` and `body` tags, and sets up the viewport and character encoding for the web page. It includes the Bootstrap CSS framework to ensure the application is responsive and has a modern look. The template defines a container `div` where the title of the application, "Task Manager," is displayed. It also includes a `block` named `content`, which is a placeholder for the content that will be injected by other templates extending this base template.

## Adding a Task: [`add_task.html`](./src/templates/add_task.html)

The [`add_task.html`](./src/templates/add_task.html) template extends the [`base.html`](./src/templates/base.html) template and provides a form for adding a new task. It uses Flask-WTF to generate a form that includes fields for the task's title, description, and a checkbox to mark the task as done. Each field is accompanied by a label, and the form is styled using Bootstrap classes to maintain a consistent and user-friendly interface. The form uses a POST method to submit the data.

## Editing a Task: [`edit_task.html`](./src/templates/edit_task.html)

The [`edit_task.html`](./src/templates/edit_task.html) template is very similar to the [`add_task.html`](./src/templates/add_task.html) template in structure and purpose but is used for editing existing tasks. It extends the [`base.html`](./src/templates/base.html) template and also generates a form with fields for the task's title, description, and completion status. The form is pre-filled with the current values of the task being edited, allowing the user to update any of the task's details. Like the add task form, it uses Bootstrap for styling and a POST method for form submission.

## Task List: [`task_list.html`](./src/templates/task_list.html)

The [`task_list.html`](./src/templates/task_list.html) template extends the [`base.html`](./src/templates/base.html) template and displays a list of tasks. It provides an "Add Task" button that links to the form for adding a new task. Each task is listed with its title and description, and tasks that are marked as done display a "Done" badge. Each task also has an "Edit" button that links to the edit form for that task, and a "Delete" button that submits a form to delete the task. The tasks are displayed in a list group, with Bootstrap styling applied for a clean and organized appearance. 

````

</details>

## Task: Main Classes and Methods

The next step in documenting a codebase is to describe the main classes and methods in the application, preferably in a standardized way for the language. Since this is a Python application, we can use the docstring format to describe each class and method. This should include a description of what the class or method does, as well as a description of the parameters and return values.

**Prompt:**

Repeat the following prompt for each class and method in the application, replacing `#file:controllers.py` with the name of the file you want to document:

```txt
add docstring documentation to #file:controllers.py
```

<details>
   <summary><b>Copilot Response:</b></summary>

<h5>controllers.py</h5>

````python
def handle_error(response):
    """
    Render an error page with a given response.

    Parameters:
    - response: The response object containing the error details.

    Returns:
    - A rendered template for the error page.
    """
    return render_template('error.html', error=response.text)

def get_tasks():
    """
    Fetch all tasks and display them on the task list page.

    Returns:
    - A rendered template for the task list page with all tasks.
    """
    tasks = TaskService.get_all_tasks()
    return render_template('task_list.html', tasks=tasks)

def add_task():
    """
    Add a new task based on form submission. If the form is not submitted,
    display the form for adding a new task.

    Returns:
    - A redirect to the task list page if the form is successfully submitted.
    - A rendered template for adding a new task if the form is not submitted.
    """
    form = TaskForm()
    if form.validate_on_submit():
        TaskService.add_task(
            form.title.data,
            form.description.data,
            form.done.data
        )
        return redirect(url_for('tasks.get_tasks'))
    
    return render_template('add_task.html', form=form)

def edit_task(task_id):
    """
    Edit an existing task based on form submission. If the form is not submitted,
    display the form pre-filled with the task's current details.

    Parameters:
    - task_id: The ID of the task to be edited.

    Returns:
    - A redirect to the task list page if the form is successfully submitted.
    - A rendered template for editing the task if the form is not submitted.
    """
    task = TaskService.get_task_by_id(task_id)
    form = TaskForm(obj=task)
    
    if form.validate_on_submit():
        TaskService.update_task(
            task,
            form.title.data,
            form.description.data,
            form.done.data
        )
        return redirect(url_for('tasks.get_tasks'))
    
    return render_template('edit_task.html', form=form)

def delete_task(task_id):
    """
    Delete a task based on its ID.

    Parameters:
    - task_id: The ID of the task to be deleted.

    Returns:
    - A redirect to the task list page after the task is deleted.
    """
    TaskService.delete_task(TaskService.get_task_by_id(task_id))
    return redirect(url_for('tasks.get_tasks'))
````

<h5>services.py</h5>

````python
class TaskService:
    @staticmethod
    def get_all_tasks():
        """
        Fetch all tasks from the database.

        Returns:
        - A list of all Task instances.
        """
        return Task.query.all()

    @staticmethod
    def get_task_by_id(task_id):
        """
        Fetch a single task by its ID.

        Parameters:
        - task_id: The ID of the task to fetch.

        Returns:
        - A Task instance corresponding to the given ID, or None if not found.
        """
        return Task.query.get(task_id)

    @staticmethod
    def add_task(title, description, done):
        """
        Add a new task to the database.

        Parameters:
        - title: The title of the task.
        - description: The description of the task.
        - done: Boolean indicating whether the task is done.

        Returns:
        - The newly created Task instance.
        """
        new_task = Task(
                title=title,
                description=description,
                done=done
        )
        db.session.add(new_task)
        db.session.commit()
        return new_task
    
    @staticmethod
    def update_task(task, title, description, done):
        """
        Update an existing task.

        Parameters:
        - task: The Task instance to update.
        - title: The new title for the task.
        - description: The new description for the task.
        - done: Boolean indicating the new done status.

        Returns:
        - The updated Task instance.
        """
        task.title = title
        task.description = description
        task.done = done
        db.session.commit()
        return task

    @staticmethod
    def delete_task(task):
        """
        Delete a task from the database.

        Parameters:
        - task: The Task instance to delete.

        Returns:
        - The deleted Task instance.
        """
        db.session.delete(task)
        db.session.commit()
        return task

from models import Task
from extensions import db
````

<h5>models.py</h5>

````python
from extensions import db

class Task(db.Model):
    """
    Task model for representing a task in the database.

    Attributes:
    - id (int): Unique identifier for the task.
    - title (str): Title of the task, cannot be null.
    - description (str): Detailed description of the task, can be null.
    - done (bool): Status of the task, defaults to False (not done).
    """

    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(100), nullable=False)
    description = db.Column(db.Text, nullable=True)
    done = db.Column(db.Boolean, default=False)

    def __repr__(self):
        """
        Provide a string representation of the Task instance.

        Returns:
        - A string representation of the Task instance.
        """
        return f'<Task {self.title}>'
````

<h5>api/resources.py</h5>

````python
from flask import Blueprint, jsonify
from flask_restful import Api, Resource
from models import Task
from services import TaskService

api_blueprint = Blueprint('api', __name__)
api = Api(api_blueprint)

class TaskList(Resource):
    """
    Resource for listing all tasks and adding a new task.
    """

    def get(self):
        """
        Retrieve a list of all tasks.

        Returns:
        - JSON representation of all tasks.
        """
        tasks = TaskService.get_all_tasks()
        return jsonify([{
            'id': task.id,
            'title': task.title,
            'description': task.description,
            'done': task.done
        } for task in tasks])

class TaskResource(Resource):
    """
    Resource for getting, updating, and deleting a single task.
    """

    def get(self, task_id):
        """
        Retrieve a single task by its ID.

        Parameters:
        - task_id: ID of the task to retrieve.

        Returns:
        - JSON representation of the task if found.
        - 404 error if the task is not found.
        """
        task = TaskService.get_task_by_id(task_id)
        if task:
            return jsonify({
                'id': task.id,
                'title': task.title,
                'description': task.description,
                'done': task.done
            })
        else:
            return {'message': 'Task not found'}, 404

    def post(self):
        """
        Add a new task. The implementation is not provided here.
        """
        pass

    def put(self, task_id):
        """
        Update an existing task. The implementation is not provided here.

        Parameters:
        - task_id: ID of the task to update.
        """
        pass

    def delete(self, task_id):
        """
        Delete an existing task. The implementation is not provided here.

        Parameters:
        - task_id: ID of the task to delete.
        """
        pass

# Registering resources with the API
api.add_resource(TaskList, '/tasks')
api.add_resource(TaskResource, '/task/<int:task_id>')

if __name__ == '__main__':
    app.run(debug=True)
````

</details>

## Task: Document Unfamiliar Code

Document any unfamiliar or complex code in the application. For example:

**Prompt:**

> ***Note:** Open the file `app.py`*

```txt
#editor add documentation
```


## Task: Supporting Diagrams

The final step in documenting a codebase is to provide supporting diagrams to help visualize how the application works. This should include diagrams of the model, view, and controller, as well as diagrams of the main classes and methods in the application.

**Prompt:**

```txt
Create a Mermaid flowchart from #file:models.py #file:services.py #file:controllers.py
```

<details>
   <summary><b>Copilot Response:</b></summary>

````markdown
   ```
   flowchart TB
      subgraph models ["models.py"]
         Task["Task Model"]
      end

      subgraph services ["services.py"]
         getAllTasks["TaskService.get_all_tasks()"]
         getTaskById["TaskService.get_task_by_id(task_id)"]
         addTask["TaskService.add_task(title, description, done)"]
         updateTask["TaskService.update_task(task, title, description, done)"]
         deleteTask["TaskService.delete_task(task)"]
      end

      subgraph controllers ["controllers.py"]
         getTasks["get_tasks()"]
         addTaskPage["add_task()"]
         editTaskPage["edit_task(task_id)"]
         deleteTaskAction["delete_task(task_id)"]
      end

      Task --> getAllTasks
      Task --> getTaskById
      Task --> addTask
      Task --> updateTask
      Task --> deleteTask

      getAllTasks --> getTasks
      getTaskById -.-> editTaskPage
      addTask --> addTaskPage
      updateTask -.-> editTaskPage
      deleteTask -.-> deleteTaskAction

      getTasks --> addTaskPage
      getTasks --> editTaskPage
      getTasks --> deleteTaskAction
   ```
````

</details>


**Prompt:**

```txt
Generate a class diagram of #file:models.py 
```

<details>
   <summary><b>Copilot Response:</b></summary>

````markdown
   ```mermaid
      classDiagram
       class Task {
           -int id
           -string title
           -string description
           -bool done
           +__repr__() string
       }
   ```
````

</details>

**Prompt:**

```txt
Generate a sequence diagram using the files #file:services.py #file:controllers.py #file:models.py
```

<details>
   <summary><b>Copilot Response:</b></summary>

````markdown
   ```mermaid
      sequenceDiagram
       participant Client as Client
       participant Controller as Controller
       participant Service as TaskService
       participant Model as TaskModel
   
       alt Add Task
           Client->>+Controller: POST /add (title, description, done)
           Controller->>+Service: add_task(title, description, done)
           Service->>+Model: Create new Task
           Model-->>-Service: Task instance
           Service-->>-Controller: Task instance
           Controller-->>-Client: Redirect to task list
       end
   
       alt Get Tasks
           Client->>+Controller: GET /
           Controller->>+Service: get_all_tasks()
           Service->>+Model: Query all Tasks
           Model-->>-Service: List of Tasks
           Service-->>-Controller: List of Tasks
           Controller-->>-Client: Render task list
       end
   
       alt Edit Task
           Client->>+Controller: POST /edit/{task_id} (title, description, done)
           Controller->>+Service: get_task_by_id(task_id)
           Service->>+Model: Query Task by ID
           Model-->>-Service: Task instance
           Service-->>-Controller: Task instance
           Controller->>Service: update_task(task, title, description, done)
           Service->>Model: Update Task
           Model-->>-Service: Updated Task instance
           Service-->>-Controller: Updated Task instance
           Controller-->>-Client: Redirect to task list
       end
   
       alt Delete Task
           Client->>+Controller: POST /delete/{task_id}
           Controller->>+Service: get_task_by_id(task_id)
           Service->>+Model: Query Task by ID
           Model-->>-Service: Task instance
           Service-->>-Controller: Task instance
           Controller->>Service: delete_task(task)
           Service->>Model: Delete Task
           Model-->>-Service: Deleted Task instance
           Service-->>-Controller: Deleted Task instance
           Controller-->>-Client: Redirect to task list
       end
   ```
````
